#!/usr/bin/python3
#
# formatxml
#

import re, sys

TAG_RE = re.compile(r'(?s)<\?[^?]*\?>|<!--.*?-->|<!\[CDATA\[.*?\]\]>|</?[^>]+>')

def format_xml(text, indent = '  '):
    parts = []
    pos = 0
    level = 0

    def emit(s):
        if s.strip():
            parts.append(indent * level + s.strip())

    for m in TAG_RE.finditer(text):
        if m.start() > pos:
            emit(text[pos:m.start()])
        token = m.group(0)
        if token.startswith('<?'):
            emit(token)    # preserve case
        elif token.startswith('<!--') or token.startswith('<![CDATA['):
            emit(token)
        elif token.startswith('</'):
            level = max(level-1, 0)
            emit(token)
        else:
            is_self = token.endswith('/>')
            emit(token)
            if not is_self:
                level += 1
        pos = m.end()

    if pos < len(text):
        emit(text[pos:])

    return '\n'.join(parts) + '\n'

if __name__ == '__main__':
    xml = sys.stdin.read()
    sys.stdout.write(format_xml(xml))
       
