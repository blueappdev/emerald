#!/usr/bin/python3
#
# tabconvert
#

import sys, os.path
from libs.tablib import TabTool

class TabConvertTool(TabTool):
    def __init__(self):
        super().__init__()
        self.applicationName = 'tabconvert'

    def help(self, *args):
        self.warn(*args)
        self.warn('tabconvert - converts semicolon separated file to tab separated')
        sys.exit(2)

    def processArguments(self, files):
        if len(files) == 0:
            # If no input file then read from stdin.
            if sys.stdin.isatty():
                self.error('no input files and no stdin')
            self.processStream(sys.stdin)
        else:
            for file in files:
                with open(file) as stream:
                    self.processStream(stream)

    def processStream(self, stream):
        for line in stream:
            line = line.strip()
            if line == '':
                continue
            record = self.recordFrom(line, sep=';')
            print('\t'.join(record))

if __name__ == '__main__':
    TabConvertTool().processCommandLine()

